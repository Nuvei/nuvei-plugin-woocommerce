/*v1.10.0	 	rev #db66aa2, built on 2021-03-25 08:30:43*/function onDomReady(a){(document.attachEvent?"complete"===document.readyState:"loading"!==document.readyState)?a():document.addEventListener("DOMContentLoaded",a)}function loadFonts(a){var b=new XMLHttpRequest;b.open("get",a,!0),b.send(""),b.onreadystatechange=function(){if(4===b.readyState){var c=document.createElement("style");c.type="text/css",c.id="injectCSSFonts",c.innerHTML=b.response.replace(/url\(([^\)]+)\)|url\(["]{1}([^"]+)["]{1}\)/gm,function(b,c,d){var e=a.substr(0,a.lastIndexOf("/")+1),f=c||d;return f&&!f.startsWith("https")?"url("+e+f+")":"url("+f+")"}),document.head.appendChild(c)}}}function setCaretPosition(a,b){if(a.setSelectionRange)a.focus({preventScroll:!0}),a.setSelectionRange(b,b);else if(a.createTextRange){var c=a.createTextRange();c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",b),c.select()}}function isSent(a,b){return Object.keys(b).concat(Object.keys(a)).every(function(c){return b[c]===a[c]})}function verifyFonts(a){var b="sans-serif";a&&a.fontFamily&&(b=a.fontFamily.split(",")[0]);var c="14px";a&&a.fontSize&&(c=a.fontSize);var d=c+" "+b;return!!document.fonts&&document.fonts.check(d)}function sendMsg(a,b){a.type="bu",a.message||(a.message={payload:{}}),parent.window.postMessage(JSON.stringify(a),b)}function defineExtraCardTypes(a){Cleave.CreditCardDetector.blocks.elo=Cleave.CreditCardDetector.blocks.visa,Cleave.CreditCardDetector.re.elo=new RegExp("^(?:401178|401179|438935|457631|457632|431274|451416|457393|627780|636297|636368|65003[1-3]|65072[0-7]|6507[0-1][0-8])\\d{0,16}"),Cleave.CreditCardDetector.re.unionPay=/^(?!627780)62\d{0,14}/,Cleave.CreditCardDetector.re.visa=/^(?!401178|401179|438935|457631|457632|431274|451416|457393)4\d{0,15}/,Cleave.CreditCardDetector.re.discover=/^(?!65003[1-3]|65072[0-7]|6507[0-1][0-8])(?:6011|65\d{0,2}|64[4-9]\d?)\d{0,12}/}function toCSS(a,b){function c(a,b){a&&!g[a]&&(g[a]={});for(var d in b){var h=b[d];if(h instanceof Array)for(var i=h,j=0;j<i.length;j++)f(a,d,i[j]);else switch(typeof h){case"number":case"string":f(a,d,h);break;case"object":var k=d.charAt(d.length-1);if(!a||"_"!==k&&"-"!==k)c(e(a,d),h);else{var l=h;for(var m in l)for(var n=m.split(/\s*,\s*/),o=0;o<n.length;o++){var p=l[m];if(p instanceof Array)for(var q=p,r=0;r<q.length;r++)f(a,d+n[o],q[r]);else f(a,d+n[o],l[m])}}}}}function d(a){return a.replace(/_/g,"-")}function e(a,b){for(var c=[],d=b.split(/\s*,\s*/),e=a.split(/\s*,\s*/),f=0;f<e.length;f++)for(var g=e[f],h=0;h<d.length;h++){var i=d[h];"&"===i.charAt(0)?c.push(g+i.substr(1)):c.push(g?g+" "+i:i)}return c.join(", ")}function f(a,c,e){"number"!=typeof e||b.useRawValues||(e+="px");for(var f=c.split(/\s*,\s*/),h=0;h<f.length;h++){var i=d(f[h]);g[a][i]?g[a][i].push(e):g[a][i]=[e]}}var g={};if("string"==typeof a)return"/*\nUnable to parse JSS: "+a+"\n*/";c("",a);var h="";for(var i in g){var j=g[i];h+=i+" {\n";for(var k in j)for(var l=j[k],m=0;m<l.length;m++)h+="\t"+k+": "+l[m]+";\n";h+="}\n"}return h}function injectCSS(a,b){b=Object.assign(defaults,b);var c=b.container||document.getElementById(b.containerName);if(!c){var d=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",e.id=b.containerName,e.media=b.media,d.appendChild(e),c=document.getElementById(b.containerName)}var f=void 0!==c.styleSheet&&void 0!==c.styleSheet.cssText,g="";return b.truncateFirst||(g+=f?c.styleSheet.cssText:c.textContent),g+=toCSS(a,b),f?c.styleSheet.cssText=g:c.textContent=g,c}var UUIDjs=function(){"use strict";function a(){}return a.maxFromBits=function(a){return Math.pow(2,a)},a.limitUI04=a.maxFromBits(4),a.limitUI06=a.maxFromBits(6),a.limitUI08=a.maxFromBits(8),a.limitUI12=a.maxFromBits(12),a.limitUI14=a.maxFromBits(14),a.limitUI16=a.maxFromBits(16),a.limitUI32=a.maxFromBits(32),a.limitUI40=a.maxFromBits(40),a.limitUI48=a.maxFromBits(48),a.randomUI04=function(){return Math.round(Math.random()*a.limitUI04)},a.randomUI06=function(){return Math.round(Math.random()*a.limitUI06)},a.randomUI08=function(){return Math.round(Math.random()*a.limitUI08)},a.randomUI12=function(){return Math.round(Math.random()*a.limitUI12)},a.randomUI14=function(){return Math.round(Math.random()*a.limitUI14)},a.randomUI16=function(){return Math.round(Math.random()*a.limitUI16)},a.randomUI32=function(){return Math.round(Math.random()*a.limitUI32)},a.randomUI40=function(){return(0|Math.random()*(1<<30))+(0|1024*Math.random())*(1<<30)},a.randomUI48=function(){return(0|Math.random()*(1<<30))+(0|Math.random()*(1<<18))*(1<<30)},a.paddedString=function(a,b,c){a=String(a),c=c||"0";var d=b-a.length;for(d;d>0;d>>>=1,c+=c)1&d&&(a=c+a);return a},a.prototype.fromParts=function(b,c,d,e,f,g){return this.version=d>>12&15,this.hex=a.paddedString(b.toString(16),8)+"-"+a.paddedString(c.toString(16),4)+"-"+a.paddedString(d.toString(16),4)+"-"+a.paddedString(e.toString(16),2)+a.paddedString(f.toString(16),2)+"-"+a.paddedString(g.toString(16),12),this},a.prototype.toString=function(){return this.hex},a.prototype.toURN=function(){return"urn:uuid:"+this.hex},a.prototype.toBytes=function(){var a=this.hex.split("-"),b=[],c=0,d=0;for(d;d<a.length;d++){var e=0;for(e;e<a[d].length;e+=2)b[c++]=parseInt(a[d].substr(e,2),16)}return b},a.prototype.equals=function(a){return a instanceof UUID&&this.hex===a.hex},a.getTimeFieldValues=function(a){var b=a-Date.UTC(1582,9,15),c=b/4294967296*1e4&268435455;return{low:1e4*(268435455&b)%4294967296,mid:65535&c,hi:c>>>16,timestamp:b}},a._create4=function(){return(new a).fromParts(a.randomUI32(),a.randomUI16(),16384|a.randomUI12(),128|a.randomUI06(),a.randomUI08(),a.randomUI48())},a._create1=function(){var b=(new Date).getTime(),c=a.randomUI14(),d=1099511627776*(1|a.randomUI08())+a.randomUI40(),e=a.randomUI04(),f=0;b!==f?(b<f&&c++,f=b,e=a.randomUI04()):Math.random()<.25&&e<9984?e+=1+a.randomUI04():c++;var g=a.getTimeFieldValues(f),h=g.low+e,i=4095&g.hi|4096;c&=16383;var j=c>>>8|128,k=255&c;return(new a).fromParts(h,g.mid,i,j,k,d)},a.create=function(a){return a=a||4,this["_create"+a]()},a.fromTime=function(b,c){c=c||!1;var d=a.getTimeFieldValues(b),e=d.low,f=4095&d.hi|4096;return!1===c?(new a).fromParts(e,d.mid,f,0,0,0):(new a).fromParts(e,d.mid,f,128|a.limitUI06,a.limitUI08-1,a.limitUI48-1)},a.firstFromTime=function(b){return a.fromTime(b,!1)},a.lastFromTime=function(b){return a.fromTime(b,!0)},a.fromURN=function(b){var c;return c===/^(?:urn:uuid:|\{)?([0-9a-f]{8})-([0-9a-f]{4})-([0-9a-f]{4})-([0-9a-f]{2})([0-9a-f]{2})-([0-9a-f]{12})(?:\})?$/i.exec(b)?(new a).fromParts(parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16),parseInt(c[4],16),parseInt(c[5],16),parseInt(c[6],16)):null},a.fromBytes=function(b){var c="",d=0,e=[4,2,2,2,6],f=0;if(b.length<5)return null;for(f;f<e.length;f++){var g=0;for(g;g<e[f];g++){var h=b[d++].toString(16);1===h.length&&(h="0"+h),c+=h}6!==e[f]&&(c+="-")}return a.fromURN(c)},a.fromBinary=function(b){var c=[],d=0;for(d;d<b.length;d++)if(c[d]=b.charCodeAt(d),c[d]>255||c[d]<0)throw new Error("Unexpected byte in binary data.");return a.fromBytes(c)},a}();String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value:function(a,b){return b=!b||b<0?0:+b,this.substring(b,b+a.length)===a}}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(a,b){"use strict";if(null==a)throw new TypeError("Cannot convert undefined or null to object");for(var c=Object(a),d=1;d<arguments.length;d++){var e=arguments[d];if(null!=e)for(var f in e)Object.prototype.hasOwnProperty.call(e,f)&&(c[f]=e[f])}return c},writable:!0,configurable:!0}),"NodeList"in window&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(a,b){b=b||window;for(var c=0;c<this.length;c++)a.call(b,this[c],c,this)}),"function"!=typeof Object.assign&&(Object.assign=function(a,b){"use strict";if(null==a)throw new TypeError("Cannot convert undefined or null to object");for(var c=Object(a),d=1;d<arguments.length;d++){var e=arguments[d];if(null!=e)for(var f in e)Object.prototype.hasOwnProperty.call(e,f)&&(c[f]=e[f])}return c}),Array.prototype.find||(Array.prototype.find=function(a){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof a)throw new TypeError("predicate must be a function");for(var b,c=Object(this),d=c.length>>>0,e=arguments[1],f=0;f<d;f++)if(b=c[f],a.call(e,b,f,c))return b}),function(){for(var a=["DocumentType","Element","CharacterData"],b=function(){null!=this.parentNode&&this.parentNode.removeChild(this)},c=0;c<a.length;c++){var d=a[c];window[d]&&!window[d].prototype.remove&&(window[d].prototype.remove=b)}}();var validator=function(){function a(a){return g.cardnumber.every(function(b){var c=b.validator(a);return c||(f=b.error),c})}function b(a){return g["exp-date"].every(function(b){var c=b.validator(a);return c||(f=b.error),c})}function c(a){return g.cvc.every(function(b){var c=b.validator(a);return c||(f=b.error),c})}function d(a){return a=a||["cardnumber","exp-date","cvc"],a.every(function(a){return g[a].every(function(b){var c=document.getElementsByName(a)[0].value,d=b.validator(c);return d||(f=b.error),d})})}function e(){return f}var f=null,g={cvc:[{error:"incomplete_cvc",validator:function(a){return a.length>=3}}],"exp-date":[{error:"incomplete_date",validator:function(a){var b=a.split("/");return!(b.length<2)&&""!==b[1]}},{error:"date_in_past",validator:function(a){var b=a.split("/");return new Date(parseInt("20"+b[1],10),parseInt(b[0],10))>new Date}},{error:"invalid_expiration_year",validator:function(a){var b=a.split("/"),c=new Date,d=new Date(parseInt("20"+b[1],10),parseInt(b[0],10));return new Date(c.getFullYear()+50,0).getFullYear()>d.getFullYear()}}],cardnumber:[{error:"incomplete_card_number",validator:function(a){return a=a.replace(/\s/gm,""),a.length>=9}},{error:"incorrect_card_number",validator:function(a){a=a.replace(/\s/gm,"");for(var b,c=0,d=0,e=a.length;e--;)b=parseInt(a.charAt(e),10)<<d,c+=b-9*(b>9),d^=1;return c%10==0&&c>0}}]};return{isValidCardNumber:a,isExpDateValid:b,isValidCvc:c,isFormValid:d,getLastError:e}}(),locales={en:{card_number:"Card number",mm_yy:"MM / YY"},de:{card_number:"Kartennummer",mm_yy:"MM / JJ"},da:{card_number:"Kreditkort",mm_yy:"MM / ÅÅ"},fr:{card_number:"Numéro de carte",mm_yy:"MM / AA"},el:{card_number:"Αριθμός κάρτας",mm_yy:"MM / YY"},es:{card_number:"Número de tarjeta",mm_yy:"ММ / AA"},lv:{card_number:"Numer karty",mm_yy:"MM / RR"},lt:{card_number:"Kortelės numeris",mm_yy:"MM / MM"},fi:{card_number:"Korttinumero",mm_yy:"MM / RR"},pl:{card_number:"Numer karty",mm_yy:"MM / RR"},bg:{card_number:"Кредитна карта",mm_yy:"ММ / ГГ"},ro:{card_number:"Număr de card",mm_yy:"LL / AA"},it:{card_number:"Numero carta",mm_yy:"MM / AA"},cz:{card_number:"Kreditni karta",mm_yy:"MM / YY"},sv:{card_number:"Kortnummer",mm_yy:"MM / ÅÅ"},no:{card_number:"Kortnummer",mm_yy:"MM / ÅÅ"},nl:{card_number:"Kaartnummer",mm_yy:"MM / JJ"},hr:{card_number:"Broj kartice",mm_yy:"MM / YY"},hu:{card_number:"Kartyaszam",mm_yy:"MM / YY"},he:{card_number:"מספר הכרטיס",mm_yy:"MM / YY"},ar:{card_number:"رقم البطاقة",mm_yy:"MM / YY"},ja:{card_number:"カード番号",mm_yy:"月 / 年"},zh:{card_number:"卡号",mm_yy:"月 / 年"},tr:{card_number:"Kart Numarası",mm_yy:"MM / AA"},vi:{card_number:"Số Thẻ",mm_yy:"TT / NN"},sr:{card_number:"Broj kartice",mm_yy:"MM / GG"},pt:{card_number:"Número do Cartão",mm_yy:"MM / AA"},ru:{card_number:"Номер карты",mm_yy:"ММ / ГГ"}},xtemp=[{"count(messageId)":1,message:"بطاقة إئتمان",language:"ar",country:"AA"},{"count(messageId)":1,message:"Кредитна карта",language:"bg",country:"BG"},{"count(messageId)":1,message:"Kreditni karta",language:"cs",country:"CZ"},{"count(messageId)":1,message:"Kreditní karta",language:"cs",country:"Cz"},{"count(messageId)":1,message:"Kreditkort",language:"da",country:"DK"},{"count(messageId)":1,message:"Kreditkarte",language:"de",country:"DE"},{"count(messageId)":1,message:"Πιστωτική Κάρτα",language:"el",country:"GR"},{"count(messageId)":1,message:"Credit Card",language:"en",country:"UK"},{"count(messageId)":1,message:"Credit Card",language:"en",country:"US"},{"count(messageId)":1,message:"Tarjeta de Crédito",language:"es",country:"ES"},{"count(messageId)":1,message:"Luottokortti",language:"fi",country:"FI"},{"count(messageId)":1,message:"Carte de crédit",language:"fr",country:"FR"},{"count(messageId)":1,message:"Kreditna kartica",language:"hr",country:"HR"},{"count(messageId)":1,message:"Kredit Kartya",language:"hu",country:"HU"},{"count(messageId)":1,message:"Kartu Kredit",language:"in",country:"ID"},{"count(messageId)":1,message:"Carta di credito",language:"it",country:"IT"},{"count(messageId)":1,message:"כרטיסי אשראי",language:"iw",country:"IL"},{"count(messageId)":1,message:"クレジットカード ",language:"ja",country:"JP"},{"count(messageId)":1,message:"Kredito kortelė",language:"lt",country:"LT"},{"count(messageId)":1,message:"Creditcard",language:"nl",country:"NL"},{"count(messageId)":1,message:"Kredittkort",language:"no",country:"NO"},{"count(messageId)":1,message:"Karta kredytowa",language:"pl",country:"PL"},{"count(messageId)":1,message:"Cartão de crédito",language:"pt",country:"BR"},{"count(messageId)":1,message:"Cartão de crédito",language:"pt",country:"PT"},{"count(messageId)":1,message:"Card de credit",language:"ro",country:"RO"},{"count(messageId)":1,message:"Кредитная карта",language:"ru",country:"RU"},{"count(messageId)":1,message:"Kreditna karta",language:"sk",country:"SK"},{"count(messageId)":1,message:"Kreditna kartica",language:"sl",country:"SI"},{"count(messageId)":1,message:"Kreditna kartica",language:"sr",country:"RS"},{"count(messageId)":1,message:"Kreditkort",language:"sv",country:"SE"},{"count(messageId)":1,message:"Kredi Kartı",language:"tr",country:"TR"},{"count(messageId)":1,message:"Thẻ Tín Dụng",language:"vi",country:"VN"},{"count(messageId)":1,message:"信用卡",language:"zh",country:"CN"},{"count(messageId)":1,message:"信用卡",language:"zh",country:"TW"}],defaults={truncateFirst:!1,container:null,containerName:"injectCSSContainer",useRawValues:!1,media:"all"},generateStyles=function(){"use strict";function a(a){return{color:"color",fontFamily:"font-family",fontSize:"font-size",fontSmoothing:["font-smooth","-webkit-font-smoothing","-moz-osx-font-smoothing"],"-webkit-font-smoothing":"-webkit-font-smoothing","-moz-osx-font-smoothing":"-moz-osx-font-smoothing",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",lineHeight:"line-height",letterSpacing:"letter-spacing",textAlign:"text-align",textDecoration:"text-decoration",textShadow:"text-shadow",textTransform:"text-transform","::placeholder":["::-webkit-input-placeholder","::-moz-placeholder",":-ms-input-placeholder",":-moz-placeholder"],"::selection":["::selection","::-moz-selection"],"::-ms-clear":["::-ms-clear"],":-webkit-autofill":":-webkit-autofill",":disabled":":disabled",":focus":":focus",":hover":":hover",opacity:"opacity",display:"display"}[a]}function b(b,c,d){var e={};e[c]={};for(var f in d){var g=a(f);e[c][g]=d[f]}return e}function c(c,d){var e={};e[c]={};for(var g in d){var h=a(g);if("string"==typeof h&&h.startsWith(":")){var i=c+h,j=b(h,i,d[g]);Object.assign(e,j)}else f.indexOf(g)>-1?h.map(function(a){e[c][a]=d[g]}):"object"==typeof h&&d[g]?h.map(function(a){var c=b(g,a,d[g]);Object.assign(e,c)}):h&&(e[c][h]=d[g])}return e}function d(a){return{base:"",empty:".empty",valid:".valid",invalid:".invalid"}[a]}function e(a,b){var e={};for(var f in b){var g=a+d(f),h=c(g.trim(),b[f]);Object.assign(e,h)}return e}var f=["fontSmoothing"];return e}();!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?exports.Cleave=b():a.Cleave=b()}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){(function(b){"use strict";var d=function(a,b){var c=this;if(c.element="string"==typeof a?document.querySelector(a):void 0!==a.length&&a.length>0?a[0]:a,!c.element)throw new Error("[cleave.js] Please check the element");b.initValue=c.element.value,c.properties=d.DefaultProperties.assign({},b),c.init()};d.prototype={init:function(){var a=this,b=a.properties;return b.numeral||b.phone||b.creditCard||b.time||b.date||0!==b.blocksLength||b.prefix?(b.maxLength=d.Util.getMaxLength(b.blocks),a.isAndroid=d.Util.isAndroid(),a.lastInputValue="",a.onChangeListener=a.onChange.bind(a),a.onKeyDownListener=a.onKeyDown.bind(a),a.onFocusListener=a.onFocus.bind(a),a.onCutListener=a.onCut.bind(a),a.onCopyListener=a.onCopy.bind(a),a.element.addEventListener("input",a.onChangeListener),a.element.addEventListener("keydown",a.onKeyDownListener),a.element.addEventListener("focus",a.onFocusListener),a.element.addEventListener("cut",a.onCutListener),a.element.addEventListener("copy",a.onCopyListener),a.initPhoneFormatter(),a.initDateFormatter(),a.initTimeFormatter(),a.initNumeralFormatter(),void((b.initValue||b.prefix&&!b.noImmediatePrefix)&&a.onInput(b.initValue))):void a.onInput(b.initValue)},initNumeralFormatter:function(){var a=this,b=a.properties;b.numeral&&(b.numeralFormatter=new d.NumeralFormatter(b.numeralDecimalMark,b.numeralIntegerScale,b.numeralDecimalScale,b.numeralThousandsGroupStyle,b.numeralPositiveOnly,b.stripLeadingZeroes,b.delimiter))},initTimeFormatter:function(){var a=this,b=a.properties;b.time&&(b.timeFormatter=new d.TimeFormatter(b.timePattern,b.timeFormat),b.blocks=b.timeFormatter.getBlocks(),b.blocksLength=b.blocks.length,b.maxLength=d.Util.getMaxLength(b.blocks))},initDateFormatter:function(){var a=this,b=a.properties;b.date&&(b.dateFormatter=new d.DateFormatter(b.datePattern),b.blocks=b.dateFormatter.getBlocks(),b.blocksLength=b.blocks.length,b.maxLength=d.Util.getMaxLength(b.blocks))},initPhoneFormatter:function(){var a=this,b=a.properties;if(b.phone)try{b.phoneFormatter=new d.PhoneFormatter(new b.root.Cleave.AsYouTypeFormatter(b.phoneRegionCode),b.delimiter)}catch(c){throw new Error("[cleave.js] Please include phone-type-formatter.{country}.js lib")}},onKeyDown:function(a){var b=this,c=b.properties,e=a.which||a.keyCode,f=d.Util,g=b.element.value;b.hasBackspaceSupport=b.hasBackspaceSupport||8===e,!b.hasBackspaceSupport&&f.isAndroidBackspaceKeydown(b.lastInputValue,g)&&(e=8),b.lastInputValue=g;var h=f.getPostDelimiter(g,c.delimiter,c.delimiters);c.postDelimiterBackspace=!(8!==e||!h)&&h},onChange:function(){this.onInput(this.element.value)},onFocus:function(){var a=this,b=a.properties;d.Util.fixPrefixCursor(a.element,b.prefix,b.delimiter,b.delimiters)},onCut:function(a){this.copyClipboardData(a),this.onInput("")},onCopy:function(a){this.copyClipboardData(a)},copyClipboardData:function(a){var b=this,c=b.properties,e=d.Util,f=b.element.value,g="";g=c.copyDelimiter?f:e.stripDelimiters(f,c.delimiter,c.delimiters);try{a.clipboardData?a.clipboardData.setData("Text",g):window.clipboardData.setData("Text",g),a.preventDefault()}catch(h){}},onInput:function(a){var b=this,c=b.properties,e=d.Util,f=e.getPostDelimiter(a,c.delimiter,c.delimiters);return c.numeral||!c.postDelimiterBackspace||f||(a=e.headStr(a,a.length-c.postDelimiterBackspace.length)),c.phone?(!c.prefix||c.noImmediatePrefix&&!a.length?c.result=c.phoneFormatter.format(a):c.result=c.prefix+c.phoneFormatter.format(a).slice(c.prefix.length),void b.updateValueState()):c.numeral?(!c.prefix||c.noImmediatePrefix&&!a.length?c.result=c.numeralFormatter.format(a):c.result=c.prefix+c.numeralFormatter.format(a),void b.updateValueState()):(c.date&&(a=c.dateFormatter.getValidatedDate(a)),c.time&&(a=c.timeFormatter.getValidatedTime(a)),a=e.stripDelimiters(a,c.delimiter,c.delimiters),a=e.getPrefixStrippedValue(a,c.prefix,c.prefixLength,c.result),a=c.numericOnly?e.strip(a,/[^\d]/g):a,a=c.uppercase?a.toUpperCase():a,a=c.lowercase?a.toLowerCase():a,!c.prefix||c.noImmediatePrefix&&!a.length||(a=c.prefix+a,0!==c.blocksLength)?(c.creditCard&&b.updateCreditCardPropsByValue(a),a=e.headStr(a,c.maxLength),c.result=e.getFormattedValue(a,c.blocks,c.blocksLength,c.delimiter,c.delimiters,c.delimiterLazyShow),void b.updateValueState()):(c.result=a,void b.updateValueState()))},updateCreditCardPropsByValue:function(a){var b,c=this,e=c.properties,f=d.Util;f.headStr(e.result,4)!==f.headStr(a,4)&&(b=d.CreditCardDetector.getInfo(a,e.creditCardStrictMode),e.blocks=b.blocks,e.blocksLength=e.blocks.length,e.maxLength=f.getMaxLength(e.blocks),e.creditCardType!==b.type&&(e.creditCardType=b.type,e.onCreditCardTypeChanged.call(c,e.creditCardType)))},updateValueState:function(){var a=this,b=d.Util,c=a.properties;if(a.element){var e=a.element.selectionEnd,f=a.element.value,g=c.result;if(e=b.getNextCursorPosition(e,f,g,c.delimiter,c.delimiters),a.isAndroid)return void window.setTimeout(function(){a.element.value=g,b.setSelection(a.element,e,c.document,!1),a.callOnValueChanged()},1);a.element.value=g,b.setSelection(a.element,e,c.document,!1),a.callOnValueChanged()}},callOnValueChanged:function(){var a=this,b=a.properties;b.onValueChanged.call(a,{target:{value:b.result,rawValue:a.getRawValue()}})},setPhoneRegionCode:function(a){var b=this;b.properties.phoneRegionCode=a,b.initPhoneFormatter(),b.onChange()},setRawValue:function(a){var b=this,c=b.properties;a=void 0!==a&&null!==a?a.toString():"",c.numeral&&(a=a.replace(".",c.numeralDecimalMark)),c.postDelimiterBackspace=!1,b.element.value=a,b.onInput(a)},getRawValue:function(){var a=this,b=a.properties,c=d.Util,e=a.element.value;return b.rawValueTrimPrefix&&(e=c.getPrefixStrippedValue(e,b.prefix,b.prefixLength,b.result)),e=b.numeral?b.numeralFormatter.getRawValue(e):c.stripDelimiters(e,b.delimiter,b.delimiters)},getISOFormatDate:function(){var a=this,b=a.properties;return b.date?b.dateFormatter.getISOFormatDate():""},getISOFormatTime:function(){var a=this,b=a.properties;return b.time?b.timeFormatter.getISOFormatTime():""},getFormattedValue:function(){return this.element.value},destroy:function(){var a=this;a.element.removeEventListener("input",a.onChangeListener),a.element.removeEventListener("keydown",a.onKeyDownListener),a.element.removeEventListener("focus",a.onFocusListener),a.element.removeEventListener("cut",a.onCutListener),a.element.removeEventListener("copy",a.onCopyListener)},toString:function(){return"[Cleave Object]"}},d.NumeralFormatter=c(1),d.DateFormatter=c(2),d.TimeFormatter=c(3),d.PhoneFormatter=c(4),d.CreditCardDetector=c(5),d.Util=c(6),d.DefaultProperties=c(7),("object"==typeof b&&b?b:window).Cleave=d,a.exports=d}).call(b,function(){return this}())},function(a,b){"use strict";var c=function(a,b,d,e,f,g,h){var i=this;i.numeralDecimalMark=a||".",i.numeralIntegerScale=b>0?b:0,i.numeralDecimalScale=d>=0?d:2,i.numeralThousandsGroupStyle=e||c.groupStyle.thousand,i.numeralPositiveOnly=!!f,i.stripLeadingZeroes=!1!==g,i.delimiter=h||""===h?h:",",i.delimiterRE=h?new RegExp("\\"+h,"g"):""};c.groupStyle={thousand:"thousand",lakh:"lakh",wan:"wan",none:"none"},c.prototype={getRawValue:function(a){return a.replace(this.delimiterRE,"").replace(this.numeralDecimalMark,".")},format:function(a){var b,d,e=this,f="";switch(a=a.replace(/[A-Za-z]/g,"").replace(e.numeralDecimalMark,"M").replace(/[^\dM-]/g,"").replace(/^\-/,"N").replace(/\-/g,"").replace("N",e.numeralPositiveOnly?"":"-").replace("M",e.numeralDecimalMark),e.stripLeadingZeroes&&(a=a.replace(/^(-)?0+(?=\d)/,"$1")),d=a,a.indexOf(e.numeralDecimalMark)>=0&&(b=a.split(e.numeralDecimalMark),d=b[0],f=e.numeralDecimalMark+b[1].slice(0,e.numeralDecimalScale)),e.numeralIntegerScale>0&&(d=d.slice(0,e.numeralIntegerScale+("-"===a.slice(0,1)?1:0))),e.numeralThousandsGroupStyle){case c.groupStyle.lakh:d=d.replace(/(\d)(?=(\d\d)+\d$)/g,"$1"+e.delimiter);break;case c.groupStyle.wan:d=d.replace(/(\d)(?=(\d{4})+$)/g,"$1"+e.delimiter);break;case c.groupStyle.thousand:d=d.replace(/(\d)(?=(\d{3})+$)/g,"$1"+e.delimiter)}return d.toString()+(e.numeralDecimalScale>0?f.toString():"")}},a.exports=c},function(a,b){"use strict";var c=function(a){var b=this;b.date=[],b.blocks=[],b.datePattern=a,b.initBlocks()};c.prototype={initBlocks:function(){var a=this;a.datePattern.forEach(function(b){"Y"===b?a.blocks.push(4):a.blocks.push(2)})},getISOFormatDate:function(){var a=this,b=a.date;return b[2]?b[2]+"-"+a.addLeadingZero(b[1])+"-"+a.addLeadingZero(b[0]):""},getBlocks:function(){return this.blocks},getValidatedDate:function(a){var b=this,c="";return a=a.replace(/[^\d]/g,""),b.blocks.forEach(function(d,e){if(a.length>0){var f=a.slice(0,d),g=f.slice(0,1),h=a.slice(d);switch(b.datePattern[e]){case"d":"00"===f?f="01":parseInt(g,10)>3?f="0"+g:parseInt(f,10)>31&&(f="31");break;case"m":"00"===f?f="01":parseInt(g,10)>1?f="0"+g:parseInt(f,10)>12&&(f="12")}c+=f,a=h}}),this.getFixedDateString(c)},getFixedDateString:function(a){var b,c,d,e=this,f=e.datePattern,g=[],h=0,i=0,j=0,k=0,l=0,m=0,n=!1;return 4===a.length&&"y"!==f[0].toLowerCase()&&"y"!==f[1].toLowerCase()&&(k="d"===f[0]?0:2,l=2-k,b=parseInt(a.slice(k,k+2),10),c=parseInt(a.slice(l,l+2),10),g=this.getFixedDate(b,c,0)),8===a.length&&(f.forEach(function(a,b){switch(a){case"d":h=b;break;case"m":i=b;break;default:j=b}}),m=2*j,k=h<=j?2*h:2*h+2,l=i<=j?2*i:2*i+2,b=parseInt(a.slice(k,k+2),10),c=parseInt(a.slice(l,l+2),10),d=parseInt(a.slice(m,m+4),10),n=4===a.slice(m,m+4).length,g=this.getFixedDate(b,c,d)),e.date=g,0===g.length?a:f.reduce(function(a,b){switch(b){case"d":return a+e.addLeadingZero(g[0]);case"m":return a+e.addLeadingZero(g[1]);default:return a+(n?e.addLeadingZeroForYear(g[2]):"")}},"")},getFixedDate:function(a,b,c){return a=Math.min(a,31),b=Math.min(b,12),c=parseInt(c||0,10),(b<7&&b%2==0||b>8&&b%2==1)&&(a=Math.min(a,2===b?this.isLeapYear(c)?29:28:30)),[a,b,c]},isLeapYear:function(a){return a%4==0&&a%100!=0||a%400==0},addLeadingZero:function(a){return(a<10?"0":"")+a},addLeadingZeroForYear:function(a){return(a<10?"000":a<100?"00":a<1e3?"0":"")+a}},a.exports=c},function(a,b){"use strict";var c=function(a,b){var c=this;c.time=[],c.blocks=[],c.timePattern=a,c.timeFormat=b,c.initBlocks()};c.prototype={initBlocks:function(){var a=this;a.timePattern.forEach(function(){a.blocks.push(2)})},getISOFormatTime:function(){var a=this,b=a.time;return b[2]?a.addLeadingZero(b[0])+":"+a.addLeadingZero(b[1])+":"+a.addLeadingZero(b[2]):""},getBlocks:function(){return this.blocks},getTimeFormatOptions:function(){var a=this;return"12"===String(a.timeFormat)?{maxHourFirstDigit:1,maxHours:12,maxMinutesFirstDigit:5,maxMinutes:60}:{maxHourFirstDigit:2,maxHours:23,maxMinutesFirstDigit:5,maxMinutes:60}},getValidatedTime:function(a){var b=this,c="";a=a.replace(/[^\d]/g,"");var d=b.getTimeFormatOptions();return b.blocks.forEach(function(e,f){if(a.length>0){var g=a.slice(0,e),h=g.slice(0,1),i=a.slice(e);switch(b.timePattern[f]){case"h":parseInt(h,10)>d.maxHourFirstDigit?g="0"+h:parseInt(g,10)>d.maxHours&&(g=d.maxHours+"");break;case"m":case"s":parseInt(h,10)>d.maxMinutesFirstDigit?g="0"+h:parseInt(g,10)>d.maxMinutes&&(g=d.maxMinutes+"")}c+=g,a=i}}),this.getFixedTimeString(c)},getFixedTimeString:function(a){var b,c,d,e=this,f=e.timePattern,g=[],h=0,i=0,j=0,k=0,l=0,m=0;return 6===a.length&&(f.forEach(function(a,b){switch(a){case"s":h=2*b;break;case"m":i=2*b;break;case"h":j=2*b}}),m=j,l=i,k=h,b=parseInt(a.slice(k,k+2),10),c=parseInt(a.slice(l,l+2),10),d=parseInt(a.slice(m,m+2),10),g=this.getFixedTime(d,c,b)),4===a.length&&e.timePattern.indexOf("s")<0&&(f.forEach(function(a,b){switch(a){case"m":i=2*b;break;case"h":j=2*b}}),m=j,l=i,b=0,c=parseInt(a.slice(l,l+2),10),d=parseInt(a.slice(m,m+2),10),g=this.getFixedTime(d,c,b)),e.time=g,0===g.length?a:f.reduce(function(a,b){switch(b){case"s":return a+e.addLeadingZero(g[2]);case"m":return a+e.addLeadingZero(g[1]);case"h":return a+e.addLeadingZero(g[0])}},"")},getFixedTime:function(a,b,c){return c=Math.min(parseInt(c||0,10),60),b=Math.min(b,60),a=Math.min(a,60),[a,b,c]},addLeadingZero:function(a){return(a<10?"0":"")+a}},a.exports=c},function(a,b){"use strict";var c=function(a,b){var c=this;c.delimiter=b||""===b?b:" ",c.delimiterRE=b?new RegExp("\\"+b,"g"):"",c.formatter=a};c.prototype={setFormatter:function(a){this.formatter=a},format:function(a){var b=this;b.formatter.clear(),a=a.replace(/[^\d+]/g,""),a=a.replace(/^\+/,"B").replace(/\+/g,"").replace("B","+"),a=a.replace(b.delimiterRE,"");for(var c,d="",e=!1,f=0,g=a.length;f<g;f++)c=b.formatter.inputDigit(a.charAt(f)),/[\s()-]/g.test(c)?(d=c,e=!0):e||(d=c);return d=d.replace(/[()]/g,""),d=d.replace(/[\s-]/g,b.delimiter)}},a.exports=c},function(a,b){"use strict";var c={blocks:{uatp:[4,5,6],amex:[4,6,5],diners:[4,6,4],discover:[4,4,4,4],mastercard:[4,4,4,4],dankort:[4,4,4,4],instapayment:[4,4,4,4],jcb15:[4,6,5],jcb:[4,4,4,4],maestro:[4,4,4,4],visa:[4,4,4,4],mir:[4,4,4,4],unionPay:[4,4,4,4],general:[4,4,4,4],generalStrict:[4,4,4,7]},re:{uatp:/^(?!1800)1\d{0,14}/,amex:/^3[47]\d{0,13}/,discover:/^(?:6011|65\d{0,2}|64[4-9]\d?)\d{0,12}/,diners:/^3(?:0([0-5]|9)|[689]\d?)\d{0,11}/,mastercard:/^(5[1-5]\d{0,2}|22[2-9]\d{0,1}|2[3-7]\d{0,2})\d{0,12}/,dankort:/^(5019|4175|4571)\d{0,12}/,instapayment:/^63[7-9]\d{0,13}/,jcb15:/^(?:2131|1800)\d{0,11}/,jcb:/^(?:35\d{0,2})\d{0,12}/,maestro:/^(?:5[0678]\d{0,2}|6304|67\d{0,2})\d{0,12}/,mir:/^220[0-4]\d{0,12}/,visa:/^4\d{0,15}/,unionPay:/^62\d{0,14}/},getInfo:function(a,b){var d=c.blocks,e=c.re;b=!!b;for(var f in e)if(e[f].test(a)){var g;return g=b?d.generalStrict:d[f],{type:f,blocks:g}}return{type:"unknown",blocks:b?d.generalStrict:d.general}}};a.exports=c},function(a,b){"use strict";var c={noop:function(){},strip:function(a,b){return a.replace(b,"")},getPostDelimiter:function(a,b,c){if(0===c.length)return a.slice(-b.length)===b?b:"";var d="";return c.forEach(function(b){a.slice(-b.length)===b&&(d=b)}),d},getDelimiterREByDelimiter:function(a){return new RegExp(a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),"g")},getNextCursorPosition:function(a,b,c,d,e){return b.length===a?c.length:a+this.getPositionOffset(a,b,c,d,e)},getPositionOffset:function(a,b,c,d,e){var f,g,h;return f=this.stripDelimiters(b.slice(0,a),d,e),g=this.stripDelimiters(c.slice(0,a),d,e),h=f.length-g.length,0!==h?h/Math.abs(h):0},stripDelimiters:function(a,b,c){var d=this;if(0===c.length){var e=b?d.getDelimiterREByDelimiter(b):"";return a.replace(e,"")}return c.forEach(function(b){b.split("").forEach(function(b){a=a.replace(d.getDelimiterREByDelimiter(b),"")})}),a},headStr:function(a,b){return a.slice(0,b)},getMaxLength:function(a){return a.reduce(function(a,b){return a+b},0)},getPrefixStrippedValue:function(a,b,c,d){if(a.slice(0,c)!==b)if(a.length<d.length)a=a.length>c?d:b;else{var e=this.getFirstDiffIndex(b,a.slice(0,c));a=b+a.slice(e,e+1)+a.slice(c+1)}return a.slice(c)},getFirstDiffIndex:function(a,b){for(var c=0;a.charAt(c)===b.charAt(c);)if(""===a.charAt(c++))return-1;return c},getFormattedValue:function(a,b,c,d,e,f){var g,h="",i=e.length>0;return 0===c?a:(b.forEach(function(b,j){if(a.length>0){var k=a.slice(0,b),l=a.slice(b);g=i?e[f?j-1:j]||g:d,f?(j>0&&(h+=g),h+=k):(h+=k,k.length===b&&j<c-1&&(h+=g)),a=l}}),h)},fixPrefixCursor:function(a,b,c,d){if(a){var e=a.value,f=c||d[0]||" ";if(a.setSelectionRange&&b&&!(b.length+f.length<e.length)){var g=2*e.length;setTimeout(function(){a.setSelectionRange(g,g)},1)}}},setSelection:function(a,b,c){if(a===this.getActiveElement(c)&&!(a&&a.value.length<=b))if(a.createTextRange){var d=a.createTextRange();d.move("character",b),d.select()}else try{a.setSelectionRange(b,b)}catch(e){}},getActiveElement:function(a){var b=a.activeElement;return b&&b.shadowRoot?this.getActiveElement(b.shadowRoot):b},isAndroid:function(){return navigator&&/android/i.test(navigator.userAgent)},isAndroidBackspaceKeydown:function(a,b){return!!(this.isAndroid()&&a&&b)&&b===a.slice(0,-1)}};a.exports=c},function(a,b){(function(b){"use strict";var c={assign:function(a,c){return a=a||{},c=c||{},a.creditCard=!!c.creditCard,a.creditCardStrictMode=!!c.creditCardStrictMode,a.creditCardType="",a.onCreditCardTypeChanged=c.onCreditCardTypeChanged||function(){},a.phone=!!c.phone,
a.phoneRegionCode=c.phoneRegionCode||"AU",a.phoneFormatter={},a.time=!!c.time,a.timePattern=c.timePattern||["h","m","s"],a.timeFormat=c.timeFormat||"24",a.timeFormatter={},a.date=!!c.date,a.datePattern=c.datePattern||["d","m","Y"],a.dateFormatter={},a.numeral=!!c.numeral,a.numeralIntegerScale=c.numeralIntegerScale>0?c.numeralIntegerScale:0,a.numeralDecimalScale=c.numeralDecimalScale>=0?c.numeralDecimalScale:2,a.numeralDecimalMark=c.numeralDecimalMark||".",a.numeralThousandsGroupStyle=c.numeralThousandsGroupStyle||"thousand",a.numeralPositiveOnly=!!c.numeralPositiveOnly,a.stripLeadingZeroes=!1!==c.stripLeadingZeroes,a.numericOnly=a.creditCard||a.date||!!c.numericOnly,a.uppercase=!!c.uppercase,a.lowercase=!!c.lowercase,a.prefix=a.creditCard||a.date?"":c.prefix||"",a.noImmediatePrefix=!!c.noImmediatePrefix,a.prefixLength=a.prefix.length,a.rawValueTrimPrefix=!!c.rawValueTrimPrefix,a.copyDelimiter=!!c.copyDelimiter,a.initValue=void 0!==c.initValue&&null!==c.initValue?c.initValue.toString():"",a.delimiter=c.delimiter||""===c.delimiter?c.delimiter:c.date?"/":c.time?":":c.numeral?",":(c.phone," "),a.delimiterLength=a.delimiter.length,a.delimiterLazyShow=!!c.delimiterLazyShow,a.delimiters=c.delimiters||[],a.blocks=c.blocks||[],a.blocksLength=a.blocks.length,a.root="object"==typeof b&&b?b:window,a.document=c.document||a.root.document,a.maxLength=0,a.backspace=!1,a.result="",a.onValueChanged=c.onValueChanged||function(){},a}};a.exports=c}).call(b,function(){return this}())}])}),function(){window.Safecharge=function(){function a(a,b,c){if(a.ccTempToken){var e=a.ccTempToken;delete a.ccTempToken}var f=new XMLHttpRequest;if("authenticate3d"===a.sourceMethod)var g=a.server+"/ppp/api/v1/clientAuthorize3d.do",h="clientAuthorize3d.do";else var g=a.server+"/ppp/api/v1/clientPayment.do",h="clientPayment.do";delete a.server,f.open("POST",g,!0),f.setRequestHeader("Content-Type","application/json;charset=UTF-8"),f.timeout=3e4,f.onload=function(){if(200===f.status){c&&sendMsg({event:"leaveXhrActionPayment",message:{payload:{}},source:parent.window.frames[window.name].name},c);var a=d.parseResult(f.responseText);"ERROR"===a.status?(a.error={type:"card",code:a.errCode},a.error.message=a.reason||"Process failed.",b(a)):"SUCCESS"===a.status&&(a.ccTempToken=e,b(a))}else b(f.responseText)},c&&sendMsg({event:"enterXhrActionPayment",message:{payload:h},source:parent.window.frames[window.name].name},c),f.send(JSON.stringify(a))}var b={local:"https://dev-mobile.safecharge.com",dev:"https://dev-mobile.safecharge.com",prod:"https://secure.safecharge.com",live:"https://secure.safecharge.com",int:"https://ppp-test.safecharge.com",test:"https://ppp-test.safecharge.com",qa:"https://apmtest.gate2shop.com"},c=function(a,b,c){var d=document.createElement("form");d.style.display="none",d.id="u"+UUIDjs.create(1).hex;var e=document.createElement("iframe");e.style.display="none",e.name="i"+UUIDjs.create(1).hex;var f=document.createElement("input");document.body.appendChild(e),d.method="POST",d.action=a,d.target=e.name,f.value=b,f.name="threeDSMethodData",d.appendChild(f),document.body.appendChild(d);var g={};try{g=JSON.parse(atob(b))}catch(k){}var h=g.threeDSServerTransID;d.submit();var i=setTimeout(function(){window.removeEventListener("message",j,!1),c("N")},15050),j=function(a){clearTimeout(i),window.removeEventListener("message",j,!1);var b={};if(document.getElementsByName(e.name)[0].remove(),a.data)try{if(b=JSON.parse(a.data),2===b.response.split("=").length){var d=atob(b.response.split("=")[1]),f={threeDSServerTransID:!1};try{f=JSON.parse(d)}catch(k){return c("N")}return c(f.threeDSServerTransID&&f.threeDSServerTransID===h?"Y":"N")}return c("N")}catch(k){return c("N")}};window.addEventListener("message",j,{once:!0}),document.getElementById(d.id).remove()},d={parseResult:function(a){var b={};try{b=JSON.parse(a)}catch(c){b={error:{type:"network",code:"invalid response",message:"Safecharge server returned invalid response"}}}return b},initPayment:function(a,e,f){if(a.paymentOption&&a.paymentOption.__tokenize)a.paymentOption.__tokenize(requestOptions,a,function(a){e(a)});else if(a&&a.paymentOption){var g=new XMLHttpRequest,h=b[a.environment]||b.prod;delete a.environment;var i=h+"/ppp/api/v1/websdk/initPaymentWithCardTokenization.do";g.open("POST",i,!0),g.setRequestHeader("Content-Type","application/json;charset=UTF-8"),g.timeout=3e4,g.onload=function(){if(200!==g.status)return e(JSON.parse(g.responseText));f&&sendMsg({event:"leaveXhrActionInit",message:{payload:{}}},f);var b=d.parseResult(g.responseText);if(b.server=h,"ERROR"===b.status)return b.error={type:"card",code:b.errCode},b.error.message=b.reason||"Process failed.",e(b);if("SUCCESS"!==b.status)return e(b);if(b.transactionStatus&&(a.transactionStatus=b.transactionStatus),b.transactionType&&(a.transactionType=b.transactionType),b.transactionId&&(a.transactionId=b.transactionId),a.billingAddress&&(b.billingAddress=a.billingAddress),a.shippingAddress&&(b.shippingAddress=a.shippingAddress),a.userDetails&&(b.userDetails=a.userDetails),!(b.paymentOption&&b.paymentOption.card&&b.paymentOption.card.threeD&&b.paymentOption.card.threeD.v2supported&&"true"===b.paymentOption.card.threeD.v2supported))return e(b);var i=b.paymentOption.card.threeD;if(a.paymentOption=b.paymentOption||{},a.paymentOption.card=b.paymentOption.card||{},a.paymentOption.card.threeD=b.paymentOption.card.threeD||{},!i.methodUrl)return a.paymentOption.card.threeD.methodCompletionInd="U",a.relatedTransactionId=b.transactionId,e(a);i.methodUrl&&i.methodPayload&&c(i.methodUrl,i.methodPayload,function(a){return b.paymentOption.card.threeD.methodCompletionInd=a,e(b)})},g.ontimeout=function(){return e({error:{type:"network",code:"connection_timeout",message:"Connection to Safecharge server timed out."}})},f&&sendMsg({event:"enterXhrActionInit",message:{payload:{}}},f),g.send(JSON.stringify(a))}}};return{card:{getDcc:function(a,c){var e=b[a.env]||b.prod;delete a.env;var f=new XMLHttpRequest,g=e+"/ppp/api/v1/websdk/clientGetDccDetails.do";f.open("POST",g,!0),f.setRequestHeader("Content-Type","application/json;charset=UTF-8"),f.timeout=3e4,f.onload=function(){c(200===f.status?d.parseResult(f.responseText):f.responseText)},f.send(JSON.stringify(a))},getCardDetails:function(a,c){var e=b[a.env]||b.prod;delete a.env;var f=new XMLHttpRequest,g="https://n-fix-cors.herokuapp.com/"+e+"/ppp/api/v1/getCardDetails.do";f.open("POST",g,!0),f.setRequestHeader("Content-Type","application/json;charset=UTF-8"),f.timeout=3e4,f.onload=function(){c(200===f.status?d.parseResult(f.responseText):f.responseText)},f.send(JSON.stringify(a))},makePayment:function(c,e,f){var g=c.sourceMethod||"createPayment",h=b[c.environment]||b.prod;c.cardData=c.cardData||{};var i={sessionToken:c.sessionToken,merchantId:c.merchantId,merchantSiteId:c.merchantSiteId,userTokenId:c.userTokenId,clientUniqueId:c.clientUniqueId,clientRequestId:c.clientRequestId,currency:c.currency,amount:c.amount,environment:c.environment,paymentOption:{card:c.cardData},sourceApplication:c.sourceApplication,billingAddress:c.billingAddress};c.userPaymentOptionId?(i.userTokenId=c.userTokenId,i.paymentOption={userPaymentOptionId:c.userPaymentOptionId,card:c.cardData}):c.paymentOption={card:c.cardData},c.sourceApplication=c.sourceApplication||"WEB_SDK_FIELDS",d.initPayment(i,function(b){var d={server:b.server,merchantId:c.merchantId,merchantSiteId:c.merchantSiteId,sessionToken:c.sessionToken,paymentOption:{card:c.cardData}};if(c.billingAddress&&(d.billingAddress=c.billingAddress),c.shippingAddress&&(d.shippingAddress=c.shippingAddress),c.userDetails&&(d.userDetails=c.userDetails),b.paymentOption&&b.paymentOption.card&&b.paymentOption.card.ccTempToken&&(d.ccTempToken=b.paymentOption.card.ccTempToken),b.paymentOption&&b.paymentOption.card&&b.paymentOption.card.threeD){d.paymentOption.card.threeD=d.paymentOption.card.threeD||{},d.paymentOption.card.threeD.v2AdditionalParams=d.paymentOption.card.threeD.v2AdditionalParams||{},d.paymentOption.card.threeD.browserDetails=c.browserDetails,d.paymentOption.card.threeD.v2AdditionalParams.challengeWindowSize="05",d.paymentOption.card.threeD.platformType="02","true"===b.paymentOption.card.threeD.v2supported&&(b.transactionId&&(d.relatedTransactionId=b.transactionId),"createPayment"===g?d.paymentOption.card.threeD.notificationURL=h+"/ppp/api/threeDSecure/completePayment.do?sessionToken="+d.sessionToken:"authenticate3d"===g&&(d.paymentOption.card.threeD.notificationURL=h+"/ppp/api/threeDSecure/completeVerify3d.do?sessionToken="+d.sessionToken));var i="";b.paymentOption.card.threeD.version&&(i=b.paymentOption.card.threeD.version,d.paymentOption.card.threeD.version=b.paymentOption.card.threeD.version),f&&sendMsg({event:"init-payment-threeDVersion",message:{payload:{data:i}},source:parent.window.frames[window.name].name},f),b.paymentOption.card.threeD.methodCompletionInd&&(d.paymentOption.card.threeD.methodCompletionInd=b.paymentOption.card.threeD.methodCompletionInd),"false"===b.paymentOption.card.threeD.v2supported&&(d.paymentOption.card.threeD={})}b.paymentOption&&b.paymentOption.userPaymentOptionId&&(d.paymentOption.userPaymentOptionId=c.userPaymentOptionId,c.cardData.CVV&&(d.paymentOption.card=d.paymentOption.card||{},d.paymentOption.card.CVV=c.cardData.CVV)),c.addendums&&(d.addendums=c.addendums),c.webMasterId&&(d.webMasterId=c.webMasterId),c.hasOwnProperty("useDCC")&&(d.useDcc=c.useDCC),c.hasOwnProperty("savePM")&&(d.paymentOption.savePm=c.savePM),d.sourceApplication=c.sourceApplication||"WEB_SDK_FIELDS",d.server=h,d.sourceMethod=g,a(d,e,f)},f)},createToken:function(a,c){a.cardData=a.cardData||{},a.sourceApplication=a.sourceApplication||"WEB_SDK_FIELDS";var e={sessionToken:a.sessionToken,sourceApplication:a.sourceApplication||"WEB_SDK_FIELDS",cardData:a.cardData,cardHolderName:a.cardHolderName},f=new XMLHttpRequest,g=b[a.environment]||b.prod,h=g+"/ppp/api/v1/cardTokenization.do";f.open("POST",h,!0),f.setRequestHeader("Content-Type","application/json;charset=UTF-8"),f.timeout=3e4,f.onload=function(){if(200===f.status){var a=d.parseResult(f.responseText);"ERROR"===a.status?(a.error={type:"card",code:a.errCode},a.error.message=a.reason||"Tokenization failed.",c(a)):c("SUCCESS"===a.status?a:a)}else c(JSON.parse(f.responseText))},f.ontimeout=function(){c({error:{type:"network",code:"connection_timeout",message:"Connection to Safecharge server timed out."}})},f.send(JSON.stringify(e))}},version:1}}()}(),onDomReady(function(){function a(){return""===d.value}function b(a,b){return isSent(a,b)||(sendMsg({event:"change",message:{payload:a},source:e},g),b=a),b}function c(c){function n(){this.classList.remove("invalid"),this.setAttribute("aria-invalid",!1),k.haveFocus||(k.haveFocus=!0,sendMsg({event:"focus",source:e},g))}function o(){validator.isValidCardNumber(f.getRawValue())?(this.classList.remove("invalid"),this.classList.add("valid"),this.setAttribute("aria-invalid",!1)):a()||(this.classList.remove("valid"),this.classList.add("invalid"),this.setAttribute("aria-invalid",!0)),k.haveFocus=!1,sendMsg({event:"blur",source:e},g)}function p(){if(""===this.value?this.classList.add("empty"):this.classList.remove("empty"),"cardnumber"===this.name){var a=!1,b={uatp:15,amex:15,diners:14,jcb15:15}[h]||16;f.getRawValue().length!==b&&19!==f.getRawValue().length||validator.isValidCardNumber(f.getRawValue())&&(a=!0),a?this.classList.add("valid"):this.classList.remove("valid")}}function q(c){if(13===c.keyCode&&navigator.userAgent.match(/Android|webOS|iPhone|iPod|Blackberry/i)){c.preventDefault();var d=window.parent.document.getElementById("_exp");d.contentWindow.document.getElementsByTagName("label")[0].focus()}else 13===c.keyCode&&c.preventDefault();setTimeout(function(){var c={cardType:h,empty:a(),complete:validator.isFormValid(["cardnumber"])};m=b(c,m)},60)}function r(a){if("cardnumber"===this.name&&"ArrowLeft"!==a.key){var b={uatp:15,amex:15,diners:14,jcb15:15}[h]||16;f.getRawValue().length!==b&&19!==f.getRawValue().length||validator.isValidCardNumber(f.getRawValue())}}var s=JSON.parse(c.data);if("input-clear"===s.action&&(d.value="",m=b({cardType:h,empty:a(),complete:validator.isFormValid(["cardnumber"])},m)),"input-focus"===s.action&&d.focus(),"add-member"===s.action&&(l=s.payload),"init-field"===s.action){g=s.origin,j=s.fieldsConfig,s.fieldsConfig.fonts&&s.fieldsConfig.fonts instanceof Array&&s.fieldsConfig.fonts.forEach(function(a){loadFonts(a.cssUrl)});injectCSS(generateStyles(".cardWidget, .cardWidget .inputField",s.payload.style));var t=j.locale,u=locales[t]||locales.en;document.body.innerHTML=document.getElementById("card").innerText.replace(/<%([^%>]+)%>/g,function(a,b){return u[b]||b}),document.getElementsByClassName("CardBrandIcon-container")[0].addEventListener("click",function(){document.getElementsByClassName("Input")[0].focus()}),d=document.getElementsByName("cardnumber")[0],d.addEventListener("blur",o),d.addEventListener("keydown",q),d.addEventListener("keyup",r),d.addEventListener("input",p),d.addEventListener("focus",n),f=new Cleave(d,{creditCard:!0,creditCardStrictMode:s.support19Digits,onCreditCardTypeChanged:function(b){document.getElementsByClassName("ccCardLogo")[0].className="ccCardLogo",document.getElementsByClassName("ccCardLogo")[0].classList.add("logo-"+b),h=b;for(var c={},d=[],f=0;f<window.parent.frames.length;f++)try{d[window.parent.frames[f].name]=f,l.ccCvc===window.parent.frames[f].name&&(c.ccCvc=window.parent.frames[f],c.ccCvc.postMessage(JSON.stringify({event:"card-type-changed",cardType:b}),document.location.origin))}catch(i){}validator.isFormValid(["cardnumber"])&&sendMsg({event:"change",message:{payload:{cardType:b,empty:a(),complete:validator.isFormValid(["cardnumber"])}},source:e},g)}});sendMsg({event:"ready",message:{payload:{height:document.getElementsByTagName("form")[0].getBoundingClientRect().height,data:s.payload,support19Digits:s.support19Digits}},source:e},g)}if("input-make-payment"===s.action&&function(){var a={},b=[];if(validator.isFormValid(["cardnumber"])){for(var c=0;c<window.parent.frames.length;c++)try{b[window.parent.frames[c].name]=c,l.ccCvc===window.parent.frames[c].name&&(a.ccCvc=window.parent.frames[c]),l.ccExpiration===window.parent.frames[c].name&&(a.ccExpiration=window.parent.frames[c])}catch(n){}var d=a.ccExpiration.document.getElementsByName("exp-date")[0].value,h=a.ccCvc.document.getElementsByName("cvc")[0].value,i=d.split("/"),j=i[0],k=20+i[1],m={merchantSiteId:s.merchantSiteId,merchantId:s.merchantId,environment:s.env||"prod",sessionToken:s.sessionToken,cardData:{cardNumber:f.getRawValue(),expirationMonth:parseInt(j,10)+"",expirationYear:k,CVV:h}};s.extraData&&s.extraData.hasOwnProperty("useDCC")&&(m.useDCC=s.extraData.useDCC),s.extraData&&s.extraData.hasOwnProperty("savePM")&&(m.savePM=s.extraData.savePM),s.extraData&&s.extraData.hasOwnProperty("billingAddress")&&(m.billingAddress=s.extraData.billingAddress),s.extraData&&s.extraData.hasOwnProperty("shippingAddress")&&(m.shippingAddress=s.extraData.shippingAddress),s.extraData&&s.extraData.hasOwnProperty("userDetails")&&(m.userDetails=s.extraData.userDetails),s.extraData&&s.extraData.hasOwnProperty("addendums")&&(m.addendums=s.extraData.addendums),s.extraData&&s.extraData.hasOwnProperty("webMasterId")&&(m.webMasterId=s.extraData.webMasterId),s.extraData&&s.extraData.hasOwnProperty("sourceApplication")&&(m.sourceApplication=s.extraData.sourceApplication),s.extraData&&s.extraData.hasOwnProperty("cardHolderName")&&(m.cardData.cardHolderName=s.extraData.cardHolderName),s.extraData&&s.extraData.hasOwnProperty("currency")&&(m.currency=s.extraData.currency),s.extraData&&s.extraData.hasOwnProperty("amount")&&(m.amount=s.extraData.amount),s.extraData&&s.extraData.hasOwnProperty("browserDetails")&&(m.browserDetails=s.extraData.browserDetails),s.extraData&&s.extraData.hasOwnProperty("userTokenId")&&(m.userTokenId=s.extraData.userTokenId),s.extraData&&s.extraData.hasOwnProperty("clientUniqueId")&&(m.clientUniqueId=s.extraData.clientUniqueId),s.all&&s.all.sourceMethod&&(m.sourceMethod=s.all.sourceMethod),Safecharge.card.makePayment(m,function(a){0===a.errCode&&(a.paymentOption||(a.paymentOption={card:{last4Digits:f.getRawValue().substr(-4),expirationMonth:parseInt(j,10)+"",expirationYear:k,ccTempToken:a.ccTempToken,isVerified:a.isVerified}})),a.all=s.all,sendMsg({event:"make-payment-result",message:{payload:{data:a}},source:e},g)},g)}else{sendMsg({event:"make-payment-result",message:{payload:{data:{error:{id:validator.getLastError(),message:validator.getLastError()}}}}},g)}}(),"get-dcc"===s.action&&(dccPayload={},dccPayload.merchantId=s.merchantId||s.extraData.merchantId,dccPayload.merchantSiteId=s.merchantSiteId||s.extraData.merchantSiteId,dccPayload.sessionToken=s.sessionToken||s.extraData.sessionToken,dccPayload.cardNumber=f.getRawValue(),dccPayload.clientRequestId=s.extraData.clientRequestId||Math.ceil(1e16*Math.random()),dccPayload.clientUniqueId=s.extraData.clientUniqueId,dccPayload.currency=s.extraData.currency,dccPayload.country=s.extraData.country,dccPayload.env=s.env,Safecharge.card.getDcc(dccPayload,function(a){sendMsg({event:"dcc-result",message:{payload:{data:a}}},g)})),"get-card-details"===s.action&&(getCardDetailsPayload={},getCardDetailsPayload.merchantId=s.merchantId||s.extraData.merchantId,getCardDetailsPayload.merchantSiteId=s.merchantSiteId||s.extraData.merchantSiteId,getCardDetailsPayload.sessionToken=s.sessionToken||s.extraData.sessionToken,getCardDetailsPayload.cardNumber=f.getRawValue(),getCardDetailsPayload.clientRequestId=s.extraData.clientRequestId||Math.ceil(1e16*Math.random()),getCardDetailsPayload.clientUniqueId=s.extraData.clientUniqueId,getCardDetailsPayload.env=s.env,Safecharge.card.getCardDetails(getCardDetailsPayload,function(a){sendMsg({event:"card-details-result",message:{payload:{data:a}}},g)})),"input-tokenize"===s.action){if(s.extraData&&s.extraData.hasOwnProperty("cardHolderName"))var v=s.extraData.cardHolderName;var w={},x=[];if(validator.isFormValid(["cardnumber"])){for(var y=0;y<window.parent.frames.length;y++)try{x[window.parent.frames[y].name]=y,l.ccCvc===window.parent.frames[y].name&&(w.ccCvc=window.parent.frames[y]),l.ccExpiration===window.parent.frames[y].name&&(w.ccExpiration=window.parent.frames[y])}catch(F){}var z,A=w.ccExpiration.document.getElementsByName("exp-date")[0].value,B=A.split("/"),C=B[0],D=20+B[1];z=w.ccCvc?w.ccCvc.document.getElementsByName("cvc")[0].value:null;var E={merchantSiteId:s.merchantSiteId,environment:s.env||"prod",sessionToken:s.sessionToken,cardData:{cardNumber:f.getRawValue(),expirationMonth:parseInt(C,10)+"",expirationYear:D,CVV:z,cardHolderName:v}};Safecharge.card.createToken(E,function(a){sendMsg({event:"tokenize-result",message:{payload:{data:a}}},g)})}else sendMsg({event:"tokenize-result",message:{payload:{data:{error:{id:i,message:i}}}}},g)}}var d,e=parent.window.frames[window.name].name,f=null,g="*",h="unknown",i=null,j={},k={haveFocus:!1},l=null,m={};window.addEventListener("message",c,!1),sendMsg({event:"load",source:e},g)});